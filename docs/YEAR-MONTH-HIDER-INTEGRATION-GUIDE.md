# 年度・月表示非表示化ソリューション実装ガイド

このガイドでは、月次報告画面の年度・月表示を非表示にしながらタブ機能を維持するための実装方法を説明します。

## 実装方法の選択肢

以下のいずれかの方法で年度・月表示の非表示化を実装できます：

### 1. HTMLに直接埋め込む（推奨）

`index.html` の `<head>` セクションに以下を追加します：

```html
<!-- 年度・月表示非表示化用のCSS -->
<link rel="stylesheet" href="%PUBLIC_URL%/styles/year-month-hider.css">
<!-- 年度・月表示非表示化用のスクリプト -->
<script src="%PUBLIC_URL%/js/year-month-hider.js"></script>
```

この方法の利点：
- ページ読み込み時に自動的に適用される
- Reactコンポーネントの修正が不要
- アプリのコード変更なしで非表示化が実現できる

### 2. ブックマークレットを使用する

アプリケーションコードを変更せず、ユーザーがブラウザでアクセスする際に年度・月表示を非表示にしたい場合：

1. `year-month-hider-bookmarklet.js` ファイルをユーザーに提供
2. ユーザーがブックマークとして保存し、月次報告画面で実行

この方法の利点：
- システム側の変更が不要
- ユーザー側で制御可能
- 必要なときのみ適用できる

### 3. デモページによる検証

`year-month-hider-demo.html` を開いて、年度・月表示の非表示化がどのように機能するかを確認できます。
このページでは、年度・月選択部分が非表示になり、タブのみが表示されます。

## ファイル構成

このソリューションに含まれるファイル：

- `/frontend/public/js/year-month-hider.js` - JavaScriptによる非表示化スクリプト
- `/frontend/public/styles/year-month-hider.css` - CSSによる非表示化スタイル
- `/year-month-hider-bookmarklet.js` - ブックマークレット版
- `/year-month-hider-demo.html` - 動作確認用デモページ
- `/year-month-hider-generator.js` - 各種実装ファイルの生成スクリプト
- `/README-YEAR-MONTH-HIDER.md` - 詳細な説明と使い方

## 実装上の注意点

### 定期的な更新

アプリケーションが更新され、UIの構造が変わった場合は、以下を確認してください：

1. 年度・月表示部分の要素セレクタが変更されていないか
2. タブ機能のセレクタが変更されていないか
3. 新しいUIフレームワークが導入されていないか

変更がある場合は、`year-month-hider.js` と `year-month-hider.css` を更新し、適切なセレクタを使用するように修正してください。

### エラーハンドリング

スクリプトには包括的なエラーハンドリングが含まれていますが、次のような場合は問題が発生する可能性があります：

- 想定外のDOMツリー構造の変更
- タブコンポーネントの実装変更
- 新しいJavaScriptフレームワークの導入

エラーが発生した場合は、ブラウザのコンソールでエラーメッセージを確認し、必要に応じてスクリプトを更新してください。

## カスタマイズガイド

### セレクタの追加/変更

年度・月表示部分の要素セレクタを追加/変更するには：

1. `/frontend/public/styles/year-month-hider.css` を開く
2. 非表示にしたい要素のセレクタを追加/変更
3. `/frontend/public/js/year-month-hider.js` の `selectors` 配列を更新

### テキスト検出の調整

テキストベースの検出を調整するには：

1. `/frontend/public/js/year-month-hider.js` を開く
2. 検出する文字列（「年度」「月」など）を追加/変更

## 最終チェックリスト

実装後、以下を確認してください：

- [ ] 月次報告画面で年度・月選択部分が非表示になっている
- [ ] タブ機能が正常に動作している
- [ ] 他の画面に影響がない
- [ ] ブラウザのコンソールにエラーが表示されていない
- [ ] SPAのページ遷移後も機能している

## トラブルシューティング

問題が発生した場合は、以下を試してください：

1. ブラウザのキャッシュをクリアする
2. 開発者ツールでスクリプトエラーを確認
3. DOMツリーを検査し、年度・月表示部分の要素セレクタを確認
4. タブ要素のセレクタを確認
5. ブックマークレット版で動作確認（システムに依存しない検証）

詳細なトラブルシューティングについては、`README-YEAR-MONTH-HIDER.md` を参照してください。