# 月次報告ページ 年度・月非表示スクリプト（シンプル版）

月次報告ページの年度・月選択部分を非表示にするシンプルなスクリプトです。複数のアプローチを使用して確実に要素を見つけて非表示にします。

## ファイル構成

### 基本スクリプト

1. **simple-monthly-report-hide.js**
   - メインのスクリプトファイル
   - 6つの異なる方法で要素を検出・非表示化
   - コメント付きで理解しやすい構造

2. **simple-hide-bookmarklet.txt**
   - ブックマークレット版
   - すぐにブラウザに登録して使用可能
   - 圧縮された形式

### 拡張機能用

3. **monthly-report-tampermonkey.js**
   - Tampermonkey/Greasemonkey用スクリプト
   - ページ読み込み時に自動実行
   - CSSインジェクションも含む

4. **global-object-hide.js**
   - JavaScriptオブジェクトベースの制御用
   - グローバルスコープのオブジェクトを操作

## 使用方法

### ブックマークレットとして使用

1. `simple-hide-bookmarklet.txt`のコード全体をコピー
2. ブラウザのブックマークバーで右クリック→「新しいブックマーク」
3. 名前：「月次報告修正」
4. URL：コピーしたコードを貼り付け
5. 保存
6. 月次報告ページでブックマークをクリック

### ブラウザコンソールから直接実行

1. 月次報告ページを開く
2. F12でデベロッパーツールを開く
3. コンソールタブを選択
4. `simple-monthly-report-hide.js`のコードをコピー&ペースト
5. Enterキーで実行

### Tampermonkey/Greasemonkeyとして使用

1. 拡張機能をインストール
2. 新規スクリプトを作成
3. `monthly-report-tampermonkey.js`の内容をコピー
4. URLパターンを実際のサイトに合わせて変更
5. 保存して有効化

## 検出方法

このスクリプトは以下の6つの方法で要素を検出します：

1. **Reactコンポーネントクラス検出**
   - `.react-grid-Container`などのReact特有のクラス名

2. **テキスト内容検出**
   - 「年度:」と「月:」を含む要素の検索

3. **セレクトボックス検出**
   - 年度・月のセレクトボックスを検索
   - id、name、optionの内容から判定

4. **直接的なCSSセレクタ**
   - よくある構造パターンに基づくセレクタ
   - `#root > div > div:nth-child(2) > main > div > div:first-child`など

5. **正規表現によるテキスト検出**
   - 「年度: 2024」「月: 5月」のパターンマッチング

6. **親要素の幅による判定**
   - 画面幅の70%以上を占める要素を行として認識

## トラブルシューティング

### 動作しない場合

1. **開発者ツールでエラーを確認**
   - F12でコンソールを開き、エラーメッセージを確認

2. **要素の構造を確認**
   - 要素の検証ツールで実際のHTML構造を確認
   - クラス名やIDが想定と異なる可能性

3. **タイミングの問題**
   - ページが完全に読み込まれてから実行
   - 必要に応じて`setTimeout`で遅延実行

4. **別のアプローチを試す**
   - `global-object-hide.js`でJavaScriptオブジェクトから制御
   - CSSのみでの非表示化

### よくある問題と解決策

- **セキュリティ制限**: 企業環境では制限される場合があり、IT部門への相談が必要
- **フレームワークの更新**: React/Vueの更新により構造が変わる可能性
- **動的生成**: MutationObserverを使用した監視が必要な場合

## カスタマイズ

### 年度・月を変更する場合

```javascript
// 2024年5月から2025年1月に変更する例
const yearMonthText = Array.from(document.querySelectorAll('div, span, p'))
  .find(el => el.textContent.match(/年度\s*[:：]\s*2025/) && el.textContent.match(/月\s*[:：]\s*1月/));
```

### 完全に削除したい場合

```javascript
// display: 'none' の代わりに remove() を使用
element.remove();
```

## 注意事項

- このスクリプトは画面表示のみを変更します
- データやシステムの動作には影響しません
- ページリロードで元に戻ります
- ブラウザの更新により動作しなくなる可能性があります