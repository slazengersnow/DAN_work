# 月次報告ページ 年度・月非表示 - 超シンプル解決法

最もシンプルなアプローチで月次報告ページの年度・月の行を非表示にします。

## ファイル構成

1. **ultra-simple-monthly-hide.js**
   - メインのスクリプト（最小限のコード）
   - CSSとJavaScriptの2段階アプローチ

2. **ultra-simple-bookmarklet.txt**
   - ブックマークレット版（即座に使用可能）
   - 成功・失敗をアラートで通知

3. **diagnostic-tool-ultra-simple.js**
   - 問題解決用の診断ツール
   - DOM構造を詳しく調査

## 使用方法

### 方法1: ブックマークレットとして使用（推奨）

1. `ultra-simple-bookmarklet.txt`のコード全体をコピー
2. ブラウザのブックマークバーで右クリック
3. 「新しいブックマーク」または「ブックマークを追加」を選択
4. 名前を「月次報告修正」に設定
5. URLにコピーしたコードを貼り付け
6. 保存
7. 月次報告ページでブックマークをクリック

### 方法2: 開発者コンソールから実行

1. 月次報告ページを開く
2. F12キーで開発者ツールを開く
3. コンソールタブを選択
4. `ultra-simple-monthly-hide.js`のコードをコピー&ペースト
5. Enterキーで実行

## アプローチの説明

このスクリプトは2段階のシンプルなアプローチを使用：

### 第1段階: CSS非表示

```css
#root > div > div:nth-child(2) > main > div > div:first-child {
  display: none !important;
}
```

### 第2段階: テキスト検索

CSSが効かない場合、「年度:」と「月:」を含む要素を検索して非表示にします。

## 前回までの問題点と今回の改善

### 問題点

1. **複雑すぎる実装**
   - 過度に多くの検出方法
   - 理解しづらいコード構造

2. **不正確なセレクタ**
   - 実際のDOM構造との不一致
   - 環境依存の要素指定

3. **実行環境の考慮不足**
   - ブラウザによる制限
   - セキュリティポリシーの影響

### 改善点

1. **極限までシンプル化**
   - 最小限のコードで実現
   - わかりやすい2段階アプローチ

2. **実用性重視**
   - ブックマークレットですぐ使用可能
   - 結果をアラートで通知

3. **エラー処理**
   - try-catchで安全に実行
   - 失敗時でも処理が継続

## トラブルシューティング

### うまくいかない場合

1. **診断ツールを実行**
   ```javascript
   // コンソールで実行
   diagnosePageStructure();
   ```

2. **要素の構造を確認**
   - 診断結果から正確なセレクタを特定
   - 必要に応じてコードを調整

3. **別のブラウザで試す**
   - Chrome、Firefox、Edgeで動作確認
   - 拡張機能の影響を排除

### よくある質問

**Q: アラートが出ない**
A: ポップアップブロックが有効な場合、コンソールで確認してください。

**Q: 非表示にならない**
A: 診断ツールを実行して、実際の要素構造を確認してください。

**Q: ページ更新後も有効にしたい**
A: Tampermonkeyなどの拡張機能を使用してください。

## 技術的な詳細

- **CSS優先順位**: `!important`で最高優先度を確保
- **テキスト検索**: 最小文字数の要素を優先（より正確な特定）
- **親要素の操作**: 行全体を確実に非表示

## 注意事項

- このスクリプトは表示のみを変更（データは影響なし）
- ページリロードで元に戻ります
- ブラウザやサイトの更新により動作しなくなる可能性

## 更新履歴

- 初版: XPathベースのアプローチ
- 第2版: 複数の検出方法を実装
- 第3版: 超シンプル化して実用性を向上