# 月次報告ページ 年度・月行削除ブックマークレット（改善版）

月次報告ページの年度・月の行を削除するための改善されたブックマークレットです。複数の手法を組み合わせて確実に要素を削除します。

## 使用方法

### メインのブックマークレット

1. ブラウザのブックマークバーを表示する
2. ブックマークバーの何もない場所で右クリックし、「新しいブックマークを追加」を選択
3. 名前に「月次報告修正」など分かりやすい名前を入力
4. URLの欄に、`monthly-report-remover-improved-bookmarklet.txt`の内容全体（javascript: から始まる行から最後の括弧まで）をコピー＆ペースト
5. 保存する

### DOM Observer版（動的ページ対応）

動的に生成される要素に対応する場合：

1. 同様にブックマークを作成
2. 名前を「月次報告修正（監視版）」などにする
3. `monthly-report-dom-observer-bookmarklet.txt`の内容をURLに貼り付け

## 実行方法

1. 月次報告ページを開く
2. ブックマークバーから作成したブックマークをクリック
3. 年度・月の行が非表示になります

## ファイル構成

### メインファイル

1. **monthly-report-remover-improved.js**
   - 改善されたメインのコード（フォーマット済み）
   - 複数の手法を組み合わせた確実な削除処理

2. **monthly-report-remover-improved-bookmarklet.txt**
   - ブックマークレットとして使用可能な圧縮版
   - すぐにコピー&ペーストできる形式

### DOM Observer版

3. **monthly-report-dom-observer.js**
   - 動的ページに対応するObserver版のコード
   - DOM変更を監視して要素を削除

4. **monthly-report-dom-observer-bookmarklet.txt**
   - DOM Observer版のブックマークレット

## 技術詳細

### 削除方法（優先順位順）

1. **XPath**
   - `//*[@id="root"]/div/div[2]/main/div/div[1]`で要素を特定

2. **CSSセレクタ**
   - `#root div main div div:first-child`
   - `div[class*="year"], div[class*="month"]`
   - その他複数のセレクタを試行

3. **コンテンツベース**
   - 「年度:」「月:」「2024」などのテキストを含む要素を検索
   - 親要素まで遡って削除

4. **フォーム要素**
   - フォームやフィルター系の要素を特定して削除

### DOM Observer版の特徴

- 動的に追加される要素にも対応
- 5秒間の自動監視
- 要素が見つかり次第、即座に削除

## トラブルシューティング

### 効果がない場合

1. ページを再読み込みしてからブックマークレットを実行
2. 開発者ツール（F12）のコンソールでログを確認
3. DOM Observer版を試す

### エラーメッセージの種類

- **「XPathで要素を特定しました」** - XPathで成功
- **「CSSセレクタで要素を特定しました」** - CSSセレクタで成功
- **「コンテンツによる削除に成功しました」** - テキスト検索で成功
- **「すべての方法で要素の特定に失敗しました」** - 削除失敗

### 対応ブラウザ

- Chrome/Edge（推奨）
- Firefox
- Safari（一部のセレクタは非対応の可能性）

## 注意事項

- ページ構造の変更により動作しなくなる可能性があります
- 削除は画面上のみで、データには影響しません
- ページリロードで元に戻ります
- DOM Observer版は5秒後に自動停止します

## 更新履歴

- 初版: XPathのみによる削除
- 改善版: 複数の手法を組み合わせた確実な削除
- DOM Observer版: 動的ページ対応版を追加