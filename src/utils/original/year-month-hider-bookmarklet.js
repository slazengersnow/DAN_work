// 年度・月表示の非表示化ブックマークレット
// 
// 使用方法:
// 1. 以下のコードをコピーします（javascript:で始まる部分すべて）
// 2. ブラウザのブックマークに新規ブックマークを作成します
// 3. 名前を「年度・月表示を非表示」などにし、URLの代わりに下記コードを貼り付けます
// 4. 月次報告画面を開いたら、このブックマークをクリックして実行します
//
javascript:(function(){(function(){const style=document.createElement('style');style.textContent=`.yearMonthDisplay,.yearMonthSection,.filterSection,.year-month-selector,.year-selector,.month-selector,[class*="yearMonth"],[class*="YearMonth"],[class*="Year-Month"],[class*="year-month"],[class*="filter"]:not(.tabsContainer):not(.ant-tabs):not(.ant-tabs-content):not(.ant-tabs-nav):not([class*="tabContent"]),#yearSelector,#monthSelector,#dateFilter,[id*="filter"]:not([id*="tab"]),[id*="selector"]:not([id*="tab"]),[id*="year"]:not([id*="tab"]),[id*="month"]:not([id*="tab"]){display:none!important;visibility:hidden!important;height:0!important;overflow:hidden!important;margin:0!important;padding:0!important;opacity:0!important}h1.title+div:not(.tabsContainer):not(.ant-tabs):not([class*="tab"]),h2.title+div:not(.tabsContainer):not(.ant-tabs):not([class*="tab"]),.page-title+div:not(.tabsContainer):not(.ant-tabs):not([class*="tab"]){display:none!important;visibility:hidden!important;height:0!important}.monthly-tabs-area,.monthly-tab,.tabsContainer,.tabs-container,.nav.nav-tabs,.ant-tabs,.ant-tabs-content,.ant-tabs-nav,.ant-tabs-tab,.ant-tabs-tabpane,[data-tab-container="true"],[data-role="monthly-tabs"],[data-tab-content],[role="tablist"],[role="tab"],[role="tabpanel"],.tab-content,.tab-pane,#monthly-report-tabs,#secure-tabs-area{display:block!important;visibility:visible!important;opacity:1!important;height:auto!important;overflow:visible!important;margin:initial!important;padding:initial!important}.nav.nav-tabs,[role="tablist"]{display:flex!important}[role="tab"],.ant-tabs-tab{display:inline-block!important}.tab-pane.active,.ant-tabs-tabpane-active,[role="tabpanel"][aria-hidden="false"]{display:block!important}`;document.head.appendChild(style);window._yearMonthObservers=window._yearMonthObservers||[];function stopExistingObservers(){if(Array.isArray(window._yearMonthObservers)){window._yearMonthObservers.forEach(observer=>{try{if(observer&&typeof observer.disconnect==='function'){observer.disconnect()}}catch(e){}});window._yearMonthObservers=[]}}stopExistingObservers();if(typeof window.hideYearMonthElements==='function'){window._originalHideFunction=window.hideYearMonthElements;window.hideYearMonthElements=function(){return forceHideYearMonth()}}let executionCount=0;function forceHideYearMonth(){try{executionCount++;let isMonthlyReport=false;try{isMonthlyReport=window.location.pathname.includes('monthly-report')||Array.from(document.querySelectorAll('h1, h2')).some(el=>el.textContent&&(el.textContent.includes('月次報告')||el.textContent.includes('月次詳細')))}catch(e){isMonthlyReport=true}if(!isMonthlyReport){return false}let elementsHidden=0;const classSelectors=['.yearMonthDisplay','.yearMonthSection','.filterSection','.year-month-selector','.year-selector','.month-selector','[class*="yearMonth"]','[class*="YearMonth"]','[class*="Year-Month"]','[class*="year-month"]','[class*="filter"]:not(.tabsContainer):not(.ant-tabs):not(.ant-tabs-content):not(.ant-tabs-nav):not([class*="tabContent"])'];function containsYearMonthText(element){try{const text=element.textContent||'';return(text.includes('年度')||text.includes('年'))&&(text.includes('月')||text.match(/\d+月/))}catch(e){return false}}try{const headingElements=document.querySelectorAll('h1, h2');headingElements.forEach(headingEl=>{if(headingEl.textContent&&(headingEl.textContent.includes('月次報告')||headingEl.textContent.includes('月次詳細'))){const nextElements=[];let nextElement=headingEl.nextElementSibling;for(let i=0;i<3&&nextElement;i++){nextElements.push(nextElement);nextElement=nextElement.nextElementSibling}nextElements.forEach(el=>{if(el&&(containsYearMonthText(el)||el.querySelector('select'))){try{if(el.style&&el.style.display!=='none'){el.style.display='none';el.style.visibility='hidden';el.style.height='0';el.style.overflow='hidden';el.style.margin='0';el.style.padding='0';el.setAttribute('data-hidden-by-script','true');elementsHidden++}}catch(e){}}})}})}catch(e){}classSelectors.forEach(selector=>{try{document.querySelectorAll(selector).forEach(el=>{try{if(el.style&&el.style.display!=='none'){el.style.display='none';el.style.visibility='hidden';el.style.height='0';el.style.overflow='hidden';el.setAttribute('data-hidden-by-script','true');elementsHidden++}}catch(e){}})}catch(e){}});try{document.querySelectorAll('select, .ant-select').forEach(select=>{try{let parent=select.parentElement;for(let i=0;i<4&&parent;i++){if(containsYearMonthText(parent)||(parent.querySelector('label')&&containsYearMonthText(parent.querySelector('label')))){if(parent.style&&parent.style.display!=='none'){parent.style.display='none';parent.style.visibility='hidden';parent.style.height='0';parent.style.overflow='hidden';parent.setAttribute('data-hidden-by-script','true');elementsHidden++;if(parent.parentElement){try{if(parent.parentElement.querySelector('button')||Array.from(parent.parentElement.children).length<=3){parent.parentElement.style.display='none';parent.parentElement.style.visibility='hidden';parent.parentElement.style.height='0';parent.parentElement.style.overflow='hidden';parent.parentElement.setAttribute('data-hidden-by-script','true');elementsHidden++}}catch(e){}}}break}parent=parent.parentElement}}catch(e){}})}catch(e){}try{document.querySelectorAll('label').forEach(label=>{try{if(label.textContent&&(label.textContent.includes('年度')||label.textContent.includes('月'))){let parent=label.parentElement;for(let i=0;i<3&&parent;i++){if(parent.style&&parent.style.display!=='none'){parent.style.display='none';parent.style.visibility='hidden';parent.style.height='0';parent.style.overflow='hidden';parent.setAttribute('data-hidden-by-script','true');elementsHidden++;if(parent.classList&&(parent.classList.contains('container')||parent.classList.contains('section')||parent.classList.contains('filterSection'))){break}}parent=parent.parentElement}}}catch(e){}})}catch(e){}try{document.querySelectorAll('div').forEach(div=>{try{if(div.style&&div.style.display!=='none'&&containsYearMonthText(div)&&!(div.querySelector&&div.querySelector('.ant-tabs'))&&!(div.classList&&div.classList.contains('ant-tabs-content'))&&!(div.classList&&div.classList.contains('tabsContainer'))&&!(div.classList&&div.classList.contains('monthly-tab'))){div.style.display='none';div.style.visibility='hidden';div.style.height='0';div.style.overflow='hidden';div.setAttribute('data-hidden-by-script','true');elementsHidden++}}catch(e){}})}catch(e){}const tabSelectors=['.monthly-tabs-area','.monthly-tab','.tabsContainer','.tabs-container','.nav.nav-tabs','.ant-tabs','.ant-tabs-content','.ant-tabs-nav','.ant-tabs-tab','.ant-tabs-tabpane','[data-tab-container="true"]','[data-role="monthly-tabs"]','[data-tab-content]','[role="tablist"]','[role="tab"]','[role="tabpanel"]','.tab-content','.tab-pane','#monthly-report-tabs','#secure-tabs-area'];try{tabSelectors.forEach(selector=>{try{document.querySelectorAll(selector).forEach(el=>{if(el instanceof HTMLElement){el.style.display='';el.style.visibility='visible';el.style.opacity='1';el.style.height='auto';el.style.overflow='visible';el.removeAttribute('data-hidden-by-script');if(selector.includes('ant-tabs')||selector.includes('tabs-container')||selector.includes('tabsContainer')){el.style.display='block'}else if(selector==='.nav.nav-tabs'||selector==='[role="tablist"]'){el.style.display='flex'}else if(selector.includes('[role="tab"]')||selector.includes('ant-tabs-tab')){el.style.display='inline-block'}if((selector.includes('tabpane')||selector.includes('tab-pane')||selector==='[role="tabpanel"]')&&el.classList.contains('active')){el.style.display='block'}}})}catch(e){}})}catch(e){}return elementsHidden>0}catch(e){return false}}try{if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',forceHideYearMonth)}else{forceHideYearMonth()}setTimeout(forceHideYearMonth,500);setTimeout(forceHideYearMonth,1000);setTimeout(forceHideYearMonth,2000)}catch(e){}try{const observer=new MutationObserver((mutations)=>{try{let shouldCheck=false;for(const mutation of mutations){if(mutation.type==='childList'||(mutation.type==='attributes'&&mutation.attributeName&&['class','style'].includes(mutation.attributeName))){shouldCheck=true;break}}if(shouldCheck){forceHideYearMonth()}}catch(e){}});if(document.body){observer.observe(document.body,{childList:true,subtree:true,attributes:true,attributeFilter:['class','style','data-hidden-by-script']});window._yearMonthObservers.push(observer)}else{const bodyObserver=new MutationObserver(()=>{if(document.body){try{observer.observe(document.body,{childList:true,subtree:true,attributes:true,attributeFilter:['class','style','data-hidden-by-script']});window._yearMonthObservers.push(observer);bodyObserver.disconnect()}catch(e){}}});bodyObserver.observe(document.documentElement,{childList:true});window._yearMonthObservers.push(bodyObserver)}}catch(e){}try{let lastUrl=location.href;const urlObserver=new MutationObserver(()=>{try{const url=location.href;if(url!==lastUrl){lastUrl=url;setTimeout(forceHideYearMonth,100)}}catch(e){}});urlObserver.observe(document,{subtree:true,childList:true});window._yearMonthObservers.push(urlObserver)}catch(e){}const intervalId=setInterval(()=>{try{forceHideYearMonth()}catch(e){}},1000);window._cleanupYearMonthHider=function(){try{clearInterval(intervalId);stopExistingObservers()}catch(e){}};window.forceHideYearMonth=forceHideYearMonth})()})();